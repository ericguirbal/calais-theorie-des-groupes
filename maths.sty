\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{maths}[2013/09/01 Collection de macros mathématiques]

\RequirePackage{amsmath}
\RequirePackage{mathtools}

%
% Ensembles de nombres
%
\newcommand{\setofnumbers}[1]{\mathbf{#1}}
\newcommand{\N}{\setofnumbers{N}}
\newcommand{\Z}{\setofnumbers{Z}}
\newcommand{\D}{\setofnumbers{D}}
\newcommand{\Q}{\setofnumbers{Q}}
\newcommand{\R}{\setofnumbers{R}}
\newcommand{\C}{\setofnumbers{C}}
\newcommand{\K}{\setofnumbers{K}}
\newcommand{\U}{\setofnumbers{U}}

%
% Cardinal d'un ensemble
%
% notation: |E|
\DeclarePairedDelimiter{\card}{\lvert}{\rvert}
% notation: card(E)
\DeclareMathOperator{\cardinal}{card}
% Ordre d'un groupe ou d'un élément
\DeclareMathOperator{\ordre}{o}

%
% Ensemble quotient
%
% Relation d'équivalence à gauche modulo un sous-groupe
\newcommand*{\Rg}[1]{\operatorname{_{#1}^{}\mathcal{R}}}
% Relation d'équivalence à droite modulo un sous-groupe
\newcommand*{\Rd}[1]{\operatorname{\mathcal{R}_{#1}^{}}}
% Classe d'un élément
% D'après https://tex.stackexchange.com/questions/22100/the-bar-and-overline-commands/22134#22134
\newcommand*{\cl}[1]{\mkern 1.5mu\overline{\mkern-1mu#1\mkern-0.5mu}\mkern 1.5mu}
% Ensemble quotient des classes à gauche
\DeclarePairedDelimiterXPP{\clsg}[2]{}{\lparen}{\rparen}{_\mathrm{g}}{\grq{#1}{#2}}
% Ensemble quotient des classes à droite
\DeclarePairedDelimiterXPP{\clsd}[2]{}{\lparen}{\rparen}{_\mathrm{d}}{\grq{#1}{#2}}
% Groupe quotient
\renewcommand*{\grq}[2]{\frac{#1}{#2}}
% Groupe des entiers modulo n
\newcommand*{\Zn}[1]{\grq{\Z}{(#1)}}

%
% Homomorphismes de groupes
%
% Ensemble d'homomorphismes
\DeclareMathOperator{\Hom}{Hom}
% Ensemble des endomorphismes
\DeclareMathOperator{\End}{End}
% Ensemble des automorphismes
\DeclareMathOperator{\Aut}{Aut}
% Ensemble des automorphismes intérieurs
\DeclareMathOperator{\Int}{Int}
% Holomorphe d'un groupe
\DeclareMathOperator{\Hol}{Hol}

% L'application identité
\DeclareMathOperator{\id}{id}
% Image d'un homomorphisme
\DeclareMathOperator{\im}{Im}
% Noyau d'un homomorphisme
\renewcommand{\ker}{\operatorname{Ker}}
\let\Ker\ker
% Rang d'un homomorphisme
\DeclareMathOperator{\rang}{rg}
% Isomorphisme de groupes
\newcommand{\iso}{\simeq}
\newcommand{\notiso}{\not\simeq}

% Sous-groupe normal
\newcommand{\normal}{\lhd}
\newcommand{\notnormal}{\ntriangleleft}
% Sous-groupe caractéristique
\newcommand{\caracteristique}{\sqsubset}
% Centre d'un groupe
\newcommand{\ZG}{\mathrm{Z}}

%
% Groupes de matrices
%
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\PSL}{PSL}
\DeclareMathOperator{\GO}{GO}
\DeclareMathOperator{\OO}{O}
\DeclareMathOperator{\SO}{\OO^+}

%
% Groupes symétriques
%
% Groupe symétrique
\newcommand*{\Sym}[1]{\operatorname{S}_{#1}}
\let\sym\Sym
% Groupe alterné
\newcommand*{\Alt}[1]{\operatorname{A}_{#1}}
% Support d'une permutation
\DeclareMathOperator{\supp}{supp}
% Longueur d'un cycle ou d'un groupe (suite de Jordan-Hölder)
\DeclareMathOperator{\longueur}{long}
%
% Arithmétique
%
\newcommand{\divise}{\mid}
\DeclareMathOperator{\pgcd}{pgcd}
\DeclareMathOperator{\ppcm}{ppcm}

% Définition d'un ensemble
\providecommand\given{\nonscript\:{;}\allowbreak\nonscript\:\mathopen{}}
\DeclarePairedDelimiterX\set[1]{\lbrace}{\rbrace}{\,#1\,}
%
% Matrices
%
% Matrice
\newcommand*{\dmatrice}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\let\dmat\dmatrice
\newcommand*{\tmatrice}[1]{%
  \bigl(
    \begin{smallmatrix}
      #1
    \end{smallmatrix}
  \bigr)
}
\let\tmat\tmatrice
\newcommand*{\matrice}[1]{\if@display\dmatrice{#1}\else\tmatrice{#1}\fi}
\let\mat\matrice
\newcommand*{\transp}[1]{{\vphantom{#1}}^{\mathrm{t}}{#1}}

% Matrice d'une application linéaire
\DeclareMathOperator{\Mat}{Mat}

% Par défaut, l'environnement pmatrix a au plus 10 colonnes,
% ce qui est insuffisant pour la saisie de certaines permutations.
\setcounter{MaxMatrixCols}{12}
%
% Intervalles
%
\newcommand*{\interval}[4]{\mathopen{#1}#2\mathclose{}\mathpunct{},#3\mathclose{#4}}
\newcommand*{\Interval}[4]{\mathopen{}\mathclose{\left#1#2,#3\right#4}}
\newcommand*{\ivc}[2]{\interval{[}{#1}{#2}{]}}
\newcommand*{\ivoc}[2]{\interval{]}{#1}{#2}{]}}
\newcommand*{\ivco}[2]{\interval{[}{#1}{#2}{[}}
\newcommand*{\ivo}[2]{\interval{]}{#1}{#2}{[}}

%
% Divers
%
% Groupe engendré par un ensemble
\DeclarePairedDelimiter{\Gr}{\langle}{\rangle}
% Espace vectoriel engendré par un ensemble de vecteur
\newcommand*{\Vect}[1]{\operatorname{Vect}\set{#1}}
% Inverse
\newcommand*{\inv}[1]{#1^{-1}}
% Valeur absolue
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
% Norme
\DeclarePairedDelimiter{\norme}{\lVert}{\rVert}
% Inégalités
\renewcommand{\geq}{\geqslant}
\renewcommand{\leq}{\leqslant}
% From: f\from A\to B
\newcommand{\from}{\colon}

%
% Constantes
%
% base des imaginaires pures
\newcommand{\I}{\mathrm{i}}

% Partie entière
\DeclarePairedDelimiter{\ent}{[}{]}

% Restriction
% D'après Enrico Gregorio
% https://tex.stackexchange.com/questions/22252/how-to-typeset-function-restrictions
\newcommand\restr[2]{{% we make the whole thing an ordinary symbol
  \left.\kern-\nulldelimiterspace % automatically resize the bar with \right
  #1 % the function
  \mathchoice{\vphantom{\big|}}{}{}{} % pretend it's a little taller at normal size
  \right|_{#2} % this is the delimiter
}}
